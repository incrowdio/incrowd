<md-item ng-class="chatHighlight(message)">
  <div layout="row" class="chat-message">
    <avatar user="message.user"></avatar>
    <div class="container">
      <span class="text"
            ng-bind="(message.message | ChatMessageFilter)"
            flex></span>
    </div>
  </div>
  <div class="chat-extra">
    <div layout="row">
      <a class="chat-attachment" ng-if="message.attachment_url"
         ng-href="{{ message.attachment_url }}">
        <img scroll-chat-on-load ng-src="{{ message.attachment_url }}">
      </a>
    </div>

    <p><a class="username"
          ng-href="#/user/{{ message.username }}">{{ message.username }}</a>
      | {{ message.sent | DTSince }}
        <span ng-if="message.user.id == user.id"> |
          <a href="" ng-click="deleteMessage(message.id)">delete</a></span>
    </p>
  </div>
</md-item>
