## Customize the test machine
machine:

  timezone:
    America/Chicago # Set the timezone

  node:
    version: 0.10.40

  python:
    version: 2.7.10

  environment:
    DJANGO_SETTINGS_MODULE: incrowd.settings
    DEBIAN_FRONTEND: noninteractive
    INITRD: No
    SETTINGS_MODE: testing

  services:
    - docker

## Customize dependencies
dependencies:
  pre:
    - pip install ansible

  cache_directories:
    - ".tox/"

test:
  post:
    - docker build -t incrowd/incrowd:testing .

deployment:
  docker:
    branch: master
    commands:
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
      - docker push incrowd/incrowd:testing
